echo "ğŸ” Running lint-staged..."
npx lint-staged

echo "ğŸ” Scanning for '.only' usage in tests..."

# Search for test.only, describe.only, it.only, etc.
if grep -r -E '\b(it|describe|test)\.only\(' tests/ --exclude-dir=node_modules --include="*.spec.ts"; then
  echo "âŒ Push blocked: '.only' found in test files."
  exit 1
fi

echo "âœ… No '.only' usage found. Proceeding with push..."